/*! angular-leaflet-directive-webpage 23-08-2015 */
!function(a){function b(b,c,d,e,f,g,h,i){function j(){var a=f.defer();return e.jsonp("bower_components/geodata/cities.jsonp"),window.citiesCallback=function(b){a.resolve(b)},a.promise}function k(a){return a.split("/")[1]}function l(a){var b=Object.keys(a);return a[b[b.length*Math.random()<<0]]}function m(){j().then(function(a){var b=l(a);n.center={lat:b.lat,lng:b.lon,zoom:3},n.markers={city:{lat:b.lat,lng:b.lon,wikipedia:b.wikipedia,label:{message:b.city,options:{noHide:!0}}}}})}var n=this;b.config([{path:"/",redirectTo:"/home"},{path:"/home",components:{main:"home"},as:"home"},{path:"/documentation",components:{main:"documentation"},as:"documentation"},{path:"/examples/:section/:example",components:{main:"examples",left:"exlist"}},{path:"/extend",components:{main:"extend"},as:"extend"}]);var o={home:"Getting started",documentation:"Documentation",examples:"Examples",extend:"How to extend"};c.$on("$locationChangeSuccess",function(a,b){n.section=k(d.path()),n.name=o[n.section]}),m(),g(m,5e3),h.$on("leafletDirectiveMarker.click",function(a,b){var c=b.model;i.location.href="http://en.wikipedia.org/wiki/"+c.wikipedia}),a.extend(n,{center:{lat:40.095,lng:23.823,zoom:4},tiles:{name:"Mapbox Outdoors",url:"http://api.tiles.mapbox.com/v4/{mapid}/{z}/{x}/{y}.png?access_token={apikey}",type:"xyz",options:{apikey:"pk.eyJ1IjoiYnVmYW51dm9scyIsImEiOiJLSURpX0pnIn0.2_9NrLz1U9bpwMQBhVk97Q",mapid:"bufanuvols.lia3no0m"}},markers:{},defaults:{scrollWheelZoom:!1,attributionControl:!1,tileLayer:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0}}})}function c(b,c){var d=c.defer();return b.get("examples/json/examples.json").success(function(a){d.resolve(a)}),{getExamples:function(){return d.promise.then(function(a){return a})},getExample:function(b){return d.promise.then(function(c){if(c[b.section]){var d={};return a.forEach(c[b.section],function(a){a.id==="/"+b.section+"/"+b.example&&(d=a)}),d}})},getSections:function(){return d.promise.then(function(a){return Object.keys(a).map(function(a){return{id:a,name:a.charAt(0).toUpperCase()+a.slice(1),active:!1}})})}}}function d(){}function e(a,b,c){var d=this;a.section&&c.getExample(a).then(function(a){d.example=a,b.get("examples/"+d.example.extUrl).success(function(a){d.example.source=a})})}function f(a,b,c){var d=this;c.getSections().then(function(a){d.sections=a}),c.getExamples().then(function(a){d.examples=a})}function g(){}function h(b){a.extend(b,{center:{lat:51.505,lng:-.09,zoom:4},tiles:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png"},defaults:{scrollWheelZoom:!1}})}function i(){}function h(b){a.extend(b,{center:{lat:51.505,lng:-.09,zoom:4},tiles:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png"},defaults:{scrollWheelZoom:!1}})}function j(){}var k=a.module("app",["ngNewRouter","leaflet-directive","hljs","hc.marked","app.directives","app.services","app.home","app.void","app.exlist","app.documentation","app.examples","app.extend"]);k.controller("AppController",["$router","$scope","$location","$http","$q","$interval","$rootScope","$window",b]);k.config(["markedProvider",function(a){a.setOptions({gfm:!0,tables:!0,highlight:function(a){return hljs.highlightAuto(a).value}})}]);var k=a.module("app.directives",[]);k.directive("ngExample",["$http","$compile",function(a,b){return{restrict:"A",scope:{source:"="},replace:!0,template:"<div></div>",link:function(a,c,d){a.$watch("source",function(d){if(d){var e=(new DOMParser).parseFromString(d,"text/html"),f=e.body,g=f.getAttribute("ng-controller"),h=b('<div ng-controller="'+g+'">'+f.innerHTML.replace('height="480px"','height="240px"')+"</div>")(a);c.append(h)}})}}}]);var k=a.module("app.services",[]);k.factory("Examples",["$http","$q",c]);var k=a.module("app.documentation",[]);k.controller("DocumentationController",[d]);var k=a.module("app.examples",[]);k.controller("ExamplesController",["$routeParams","$http","Examples",e]),k.controller("BasicFirstController",["$scope",function(a){}]),k.controller("BasicCenterAutodiscoverController",["$scope",function(b){a.extend(b,{center:{autoDiscover:!0}})}]),k.controller("BasicCenterController",["$scope",function(b){a.extend(b,{london:{lat:51.505,lng:-.09,zoom:4}})}]),k.controller("BasicCenterGeoIPController",["$scope","$http",function(b,c){a.extend(b,{center:{lat:0,lng:0,zoom:2}}),b.searchIP=function(a){var d="http://freegeoip.net/json/"+a;c.get(d).success(function(a){b.center={lat:a.latitude,lng:a.longitude,zoom:10},b.ip=a.ip})},b.searchIP("")}]),k.controller("BasicCenterUrlHashController",["$scope","$location",function(b,c){a.extend(b,{london:{lat:51.505,lng:-.09,zoom:4}}),b.$on("centerUrlHash",function(a,b){c.search({c:b})}),b.changeLocation=function(a){c.search({c:a})}}]);var k=a.module("app.exlist",[]);k.controller("ExlistController",["$q","$http","Examples",f]);var k=a.module("app.extend",[]);k.controller("ExtendController",[g]);var k=a.module("app.home",[]);k.controller("HomeController",[i]),k.controller("HomeFirstExampleController",["$scope",h]);var k=a.module("app.void",[]);k.controller("VoidController",[j])}(window.angular);