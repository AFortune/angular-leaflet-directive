<html ng-app="demoapp">
    <head>
        <script src="//cdn.leafletjs.com/leaflet-0.5.1/leaflet.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script>
        <script src="../src/angular-leaflet-directive.js"></script>
        <link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.5.1/leaflet.css" />
        <!--[if lte IE 8]>
        <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.ie.css" />
        <![endif]-->
        <style type="text/css">
            p, h4 { margin: 10px 0; padding: 0; }
            body { margin: 5px; }
            div#control {
                z-index: 100;
                position: absolute;
                bottom: 1em;
                left: 1em;
                background: white;
                padding: .4em 1em;
                opacity: .8;
                border-radius: 8px;
            }
            #left { float: left; }
            #right { float: right; }
            input { margin-bottom: 5px; }
            div.angular-leaflet-map {
                width: 100%;
                height: 100%;
            }
        </style>
        <script>
            angular.module("demoapp", ["leaflet-directive"]);

            function DemoController($scope) {
                $scope.addMultiMarker = function() {
                    var m_key = document.getElementById('new_mm_name').value;
                    $scope.markers[m_key] = {
                        lat: document.getElementById('new_mm_lat').value,
                        lng: document.getElementById('new_mm_lng').value,
                    };
                }
                $scope.deleteMultiMarker = function(m_key) {
                    delete $scope.markers[m_key];
                }
                $scope.addPointToMainPath = function() {
                    $scope.path.latlngs.push({
                        lat: document.getElementById('new_mp_lat').value,
                        lng: document.getElementById('new_mp_lng').value,
                    });
                }

                angular.extend($scope, {
                    // set up map center
                    cen: {
                        lat: 53,
                        lng: -3,
                        zoom: 6
                    },
                    // set up multiple markers on map
                    markers: {
                        London : {
                            lat: 51.50,
                            lng: -0.082
                        },
                        Manchester: {
                            lat: 53.48,
                            lng: -2.24,
                            draggable: true
                        },
                    }
                });

                angular.extend($scope, {
                    path: {
                        color: 'red',
                        smoothFactor: 1,
                        latlngs: [ $scope.markers.London, $scope.markers.Manchester ]
                    },
                });

            };
        </script>
    </head>
    <body ng-controller="DemoController">
        <div id="control">
            <div class="panel">
                <h3>Center</h3>
                lng: <input type="text" ng-model="cen.lng" size="8"/>
                lat: <input type="text" ng-model="cen.lat" size="8"/>
                zoom: <input type="text" ng-model="cen.zoom" size="8"/>
            </div>

            <div class="panel">
                <h3>Markers</h3>
                <div ng-repeat="(name, m) in markers">
                    <p><b>{{name}}</b>{{m.draggable && ' (draggable) '}}:<p>
                    lng: <input type="text" ng-model="m.lng"/>
                    lat: <input type="text" ng-model="m.lat"/>
                    <input type="button" value="X"
                        ng-click="deleteMultiMarker(name)"/>
                </div>
                <input id="new_mm_name" type="text" placeholder="name" size="8"/>
                <input id="new_mm_lng" type="text" placeholder="lng" size="10"/>
                <input id="new_mm_lat" type="text" placeholder="lat" size="10"/>
                <input type="button" value="Add marker"
                    ng-click="addMultiMarker()"/>
            </div>

            <div class="panel">
                <h4>Path</h4>
                color: <input type="text" ng-model="path.color" size="8"/>
                smooth factor: <input type="text" ng-model="path.smoothFactor"
                size="8"/>
                <div ng-repeat="p in path.latlngs">
                    (point {{$index}})
                    lng: <input type="text" ng-model="p.lng"/>
                    lat: <input type="text" ng-model="p.lat"/>
                </div>
                <input id="new_mp_lng" type="text" placeholder="lng" size="10"/>
                <input id="new_mp_lat" type="text" placeholder="lat" size="10"/>
                <input type="button" value="Add point"
                ng-click="addPointToMainPath()"/>
            </div>
        </div>
        <leaflet center="cen" markers="markers" path="path"></leaflet>
    </body>
</html>
