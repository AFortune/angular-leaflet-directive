/**!
 * The MIT License
 *
 * Copyright (c) 2013 the angular-leaflet-directive Team, http://tombatossals.github.io/angular-leaflet-directive
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * angular-leaflet-directive
 * https://github.com/tombatossals/angular-leaflet-directive
 *
 * @authors https://github.com/tombatossals/angular-leaflet-directive/graphs/contributors
 */

/*!
*  angular-leaflet-directive-webpage 0.0.1 2015-11-08
*  angular-leaflet-directive-webpage - An AngularJS webpage which shows how to use angular-leaflet-directive
*  git: https://github.com/tombatossals/angular-leaflet-directive/tree/gh-pages
*/
(function(angular){
'use strict';
!function(a){"use strict";function b(b,c,d,e,f,g,h,i,j){function k(){var a=f.defer();return e.jsonp("bower_components/geodata/cities.jsonp"),window.citiesCallback=function(b){a.resolve(b)},a.promise}function l(a){return a.split("/")[1]}function m(a){return a.split("/")[2]}function n(a){var b=Object.keys(a);return a[b[b.length*Math.random()<<0]]}function o(){k().then(function(a){var b=n(a);p.center={lat:b.lat,lng:b.lon,zoom:3},p.markers={city:{lat:b.lat,lng:b.lon,wikipedia:b.wikipedia,label:{message:b.city,options:{noHide:!0}}}}})}var p=this;b.config([{path:"/",redirectTo:"/home"},{path:"/home",components:{main:"home"},as:"home"},{path:"/documentation/:subsection",components:{main:"documentation"},as:"documentation"},{path:"/examples/:section/:example",components:{main:"examples",left:"exlist"}},{path:"/extend",components:{main:"extend"},as:"extend"}]);var q={home:"Getting started",documentation:"Documentation",examples:"Examples",extend:"How to extend"};c.$on("$locationChangeSuccess",function(a,b){if(p.section=l(d.path()),"documentation"===p.section&&(p.subsection=m(d.path())),"examples"===p.section){var c={section:"basic",example:"first-example"};j.getExample(c).then(function(a){console.log("ye",a),p.example=a})}p.name=q[p.section]}),o(),g(o,5e3),h.$on("leafletDirectiveMarker.click",function(a,b){var c=b.model;i.location.href="http://en.wikipedia.org/wiki/"+c.wikipedia}),a.extend(p,{center:{lat:40.095,lng:23.823,zoom:4},tiles:{name:"Mapbox Outdoors",url:"http://api.tiles.mapbox.com/v4/{mapid}/{z}/{x}/{y}.png?access_token={apikey}",type:"xyz",options:{apikey:"pk.eyJ1IjoiYnVmYW51dm9scyIsImEiOiJLSURpX0pnIn0.2_9NrLz1U9bpwMQBhVk97Q",mapid:"bufanuvols.lia3no0m"}},markers:{},defaults:{scrollWheelZoom:!1,attributionControl:!1,tileLayer:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0}}})}function c(b,c){var d=c.defer();return b.get("examples/json/examples.json").success(function(a){d.resolve(a)}),{getExamples:function(){return d.promise.then(function(a){return a})},getExample:function(e){var f=c.defer();return d.promise.then(function(c){if(c[e.section]){var d={};return a.forEach(c[e.section],function(a){a.id==="/"+e.section+"/"+e.example&&(d=a)}),d?b.get("examples/"+d.extUrl).success(function(a){d.source=a,f.resolve(d)}):void f.resolve(d)}}),f.promise},getSections:function(){return d.promise.then(function(a){return Object.keys(a).map(function(a){return{id:a,name:a.charAt(0).toUpperCase()+a.slice(1),active:!1}})})}}}function d(){}function e(a,b,c){var d=this;a.section&&c.getExample(a).then(function(a){d.example=a})}function f(a,b,c){var d=this;c.getSections().then(function(a){d.sections=a}),c.getExamples().then(function(a){d.examples=a})}function g(){}function h(b){a.extend(b,{center:{lat:51.505,lng:-.09,zoom:4},tiles:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png"},defaults:{scrollWheelZoom:!1}})}function i(){}function h(b){a.extend(b,{center:{lat:51.505,lng:-.09,zoom:6},tiles:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png"},defaults:{scrollWheelZoom:!1}})}function j(){}var k=a.module("app",["ngNewRouter","leaflet-directive","hljs","hc.marked","app.directives","app.services","app.home","app.void","app.exlist","app.documentation","app.examples","app.extend"]);k.controller("AppController",b);k.config(["markedProvider",function(a){a.setOptions({gfm:!0,tables:!0,highlight:function(a){return hljs.highlightAuto(a).value}})}]),b.$inject=["$router","$scope","$location","$http","$q","$interval","$rootScope","$window","Examples"];var k=a.module("app.directives",[]);k.directive("ngExample",["$http","$compile",function(a,b){return{restrict:"A",scope:{source:"="},replace:!0,template:"<div></div>",link:function(a,c,d){a.$watch("source",function(d){if(d){var e=(new DOMParser).parseFromString(d,"text/html"),f=e.body,g=f.getAttribute("ng-controller"),h=b('<div ng-controller="'+g+'">'+f.innerHTML.replace('height="480px"','height="360px"')+"</div>")(a);c.append(h)}})}}}]);var k=a.module("app.services",[]);k.factory("Examples",c),c.$inject=["$http","$q"];var k=a.module("app.documentation",[]);k.controller("DocumentationController",d);var k=a.module("app.examples",[]);k.controller("ExamplesController",e),e.$inject=["$routeParams","$http","Examples"],k.controller("BasicFirstController",["$scope",function(a){}]),k.controller("BasicCenterAutodiscoverController",["$scope",function(b){a.extend(b,{center:{autoDiscover:!0}})}]),k.controller("BasicCenterController",["$scope",function(b){a.extend(b,{london:{lat:51.505,lng:-.09,zoom:4}})}]),k.controller("BasicCenterGeoIPController",["$scope","$http",function(b,c){a.extend(b,{center:{lat:0,lng:0,zoom:2}}),b.searchIP=function(a){var d="http://freegeoip.net/json/"+a;c.get(d).success(function(a){b.center={lat:a.latitude,lng:a.longitude,zoom:10},b.ip=a.ip})},b.searchIP("")}]),k.controller("BasicCenterUrlHashController",["$scope","$location",function(b,c){a.extend(b,{london:{lat:51.505,lng:-.09,zoom:4}}),b.$on("centerUrlHash",function(a,b){c.search({c:b})}),b.changeLocation=function(a){c.search({c:a})}}]);var k=a.module("app.exlist",[]);k.controller("ExlistController",f),f.$inject=["$q","$http","Examples"];var k=a.module("app.extend",[]);k.controller("ExtendController",[g]);var k=a.module("app.home",[]);k.controller("HomeController",[i]),k.controller("HomeFirstExampleController",["$scope",h]);var k=a.module("app.void",[]);k.controller("VoidController",[j])}(window.angular);
}(angular));